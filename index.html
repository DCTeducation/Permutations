<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Permutations | DCT Education</title>
  <meta name="description" content="Learn permutations (order matters) with decision training, calculator, and practice." />
  <style>
    :root{
      --bg:#ffffff;
      --text:#111;
      --muted:#5b5b5b;
      --border:#dedede;
      --soft:#f6f6f6;
      --soft2:#f1f5ff;
      --goodbg:#ecfdf3;
      --goodbd:#bfe9cf;
      --badbg:#fff1f2;
      --badbd:#fecdd3;
      --accent:#0b5fff;
    }
    *{box-sizing:border-box}
    body{
      margin:0; background:var(--bg); color:var(--text);
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      line-height:1.6;
    }
    .wrap{max-width:980px; margin:0 auto; padding:28px 16px 64px;}
    header{display:flex; gap:14px; align-items:flex-start; justify-content:space-between; flex-wrap:wrap;}
    h1{margin:0; font-size:34px; letter-spacing:-.02em;}
    .tagline{margin:6px 0 0; color:var(--muted);}
    .top-actions{display:flex; gap:10px; align-items:center; flex-wrap:wrap; margin-top:6px;}
    .btn{
      display:inline-flex; align-items:center; justify-content:center; gap:8px;
      padding:10px 12px; border-radius:12px; border:1px solid var(--border);
      background:var(--bg); cursor:pointer; font-weight:600; font-size:14px;
    }
    .btn:hover{filter:brightness(.98)}
    .btn.primary{background:var(--accent); border-color:var(--accent); color:#fff;}
    .btn.ghost{background:var(--soft);}
    .pill{
      display:inline-block; padding:3px 10px; border-radius:999px;
      border:1px solid var(--border); background:var(--soft); font-size:13px; color:#222;
    }
    .grid{display:grid; grid-template-columns:1fr; gap:14px; margin-top:18px;}
    @media (min-width: 920px){
      .grid{grid-template-columns: 1.15fr .85fr;}
    }
    .card{
      border:1px solid var(--border); border-radius:16px;
      padding:16px; background:var(--bg);
      box-shadow:0 1px 2px rgba(0,0,0,.04);
    }
    h2{margin:0 0 8px; font-size:20px;}
    h3{margin:14px 0 8px; font-size:16px;}
    .muted{color:var(--muted);}
    .soft{background:var(--soft); border:1px solid var(--border); border-radius:14px; padding:12px;}
    code{background:var(--soft); padding:2px 6px; border-radius:10px;}
    pre{background:var(--soft); border:1px solid var(--border); padding:12px; border-radius:14px; overflow:auto; margin:10px 0 0;}
    ul{margin:8px 0 0 20px;}
    .row{display:flex; gap:10px; flex-wrap:wrap; align-items:flex-end;}
    label{display:block; font-size:13px; color:var(--muted); font-weight:700; margin-bottom:6px;}
    input, select{
      font-size:16px; padding:10px 12px; border-radius:12px; border:1px solid var(--border);
      background:var(--bg); min-width:120px;
    }
    .kpi{font-size:18px; font-weight:800;}
    .alert{
      border-radius:14px; padding:10px 12px; border:1px solid var(--border);
      background:var(--soft);
    }
    .ok{background:var(--goodbg); border-color:var(--goodbd);}
    .no{background:var(--badbg); border-color:var(--badbd);}
    .hr{height:1px; background:var(--border); margin:12px 0;}
    details{margin-top:8px;}
    summary{cursor:pointer; font-weight:700;}
    .tiny{font-size:13px;}
    .scorebox{display:flex; gap:10px; flex-wrap:wrap; align-items:center;}
    .score{padding:6px 10px; border-radius:12px; border:1px solid var(--border); background:var(--soft);}
    .footer{margin-top:18px; color:var(--muted); font-size:13px;}
    a{color:var(--accent); text-decoration:none}
    a:hover{text-decoration:underline}
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div>
        <h1>Permutations <span class="pill">Order matters</span></h1>
        <p class="tagline">Built for test success: decide fast → calculate clean → practice like an exam.</p>
      </div>
      <div class="top-actions">
        <button class="btn ghost" id="btnJumpPractice" type="button">Jump to practice</button>
        <button class="btn" id="btnResetScore" type="button">Reset score</button>
        <button class="btn primary" id="btnNewQuestion" type="button">New practice question</button>
      </div>
    </header>

    <div class="grid">

      <!-- LEFT COLUMN: TEACHING FLOW -->
      <div class="card">
        <h2>1) Decide before you calculate (this is where most people fail)</h2>
        <div class="soft">
          <p style="margin:0 0 8px;"><b>One question:</b> If I swap the order, does the outcome change?</p>
          <ul>
            <li><b>Different roles / ranks</b> (1st/2nd/3rd, President/Vice, Captain/Assistant) → <b>Permutation</b></li>
            <li><b>Codes</b> (PIN, password, license plate) → <b>Permutation</b></li>
            <li><b>Just choosing a group</b> (committee, toppings) → <b>Not a permutation</b></li>
          </ul>
          <p class="muted tiny" style="margin:10px 0 0;">Exam shortcut: if the question names jobs/positions, it’s order.</p>
        </div>

        <div class="hr"></div>

        <h2>2) The math (no fluff)</h2>
        <p>Arranging <b>r</b> items chosen from <b>n</b> distinct items (no repeats):</p>
        <pre><code>P(n,r) = n! / (n-r)!</code></pre>
        <p class="muted tiny">But you almost never need factorials. Think “multiply down for r spots”.</p>

        <div class="soft" style="margin-top:10px;">
          <p style="margin:0 0 6px;"><b>Worked example:</b> podium (gold/silver/bronze) from 12 runners</p>
          <p style="margin:0 0 6px;">There are <b>3 spots</b>, so multiply down 3 times:</p>
          <p style="margin:0;"><code>12 · 11 · 10 = 1320</code></p>
        </div>

        <div class="hr"></div>

        <h2>3) Calculator (P(n,r))</h2>
        <div class="row">
          <div>
            <label for="n">n (total choices)</label>
            <input id="n" type="number" min="0" value="10" />
          </div>
          <div>
            <label for="r">r (spots / positions)</label>
            <input id="r" type="number" min="0" value="4" />
          </div>
          <div>
            <button class="btn primary" type="button" id="btnCalc">Calculate</button>
          </div>
        </div>
        <div id="calcMsg" class="alert" style="margin-top:10px;">
          <span class="kpi" id="calcOut">P(10,4) = 5040</span>
          <div class="muted tiny" id="calcSteps" style="margin-top:4px;">10 · 9 · 8 · 7</div>
        </div>

        <details>
          <summary>Common exam traps (read once)</summary>
          <ul>
            <li><b>Committee</b> is not order. If it’s “pick 5 students” → not permutation.</li>
            <li><b>With repeats allowed</b> changes everything (ex: PIN with repeats).</li>
            <li><b>Words like “arrange”, “rank”, “assign roles”</b> are permutation signals.</li>
          </ul>
        </details>
      </div>

      <!-- RIGHT COLUMN: INTERACTION / QUIZ -->
      <div class="card" id="practice">
        <h2>Practice Mode</h2>
        <p class="muted">Answer fast. Then check. You’re training recognition.</p>

        <div class="scorebox">
          <div class="score"><b>Score:</b> <span id="score">0</span></div>
          <div class="score"><b>Streak:</b> <span id="streak">0</span></div>
          <div class="score"><b>Questions:</b> <span id="count">0</span></div>
        </div>

        <div class="hr"></div>

        <h3>A) Is it a permutation?</h3>
        <div class="soft">
          <div class="muted tiny">Scenario</div>
          <div style="font-weight:800; margin-top:4px;" id="scenarioText"></div>

          <div class="row" style="margin-top:10px;">
            <button class="btn" type="button" id="btnPerm">Permutation</button>
            <button class="btn" type="button" id="btnNotPerm">Not permutation</button>
          </div>

          <div id="scenarioResult" class="alert" style="margin-top:10px; display:none;"></div>
        </div>

        <div class="hr"></div>

        <h3>B) Compute P(n,r)</h3>
        <div class="soft">
          <div class="muted tiny">Question</div>
          <div style="font-weight:800; margin-top:4px;" id="practiceQ"></div>

          <div class="row" style="margin-top:10px;">
            <div style="flex:1; min-width:220px;">
              <label for="answer">Your answer</label>
              <input id="answer" type="number" inputmode="numeric" placeholder="Type a number" />
            </div>
            <div>
              <button class="btn primary" type="button" id="btnCheck">Check</button>
            </div>
            <div>
              <button class="btn" type="button" id="btnReveal">Reveal</button>
            </div>
          </div>

          <div id="practiceResult" class="alert" style="margin-top:10px; display:none;"></div>
        </div>

        <div class="footer">
          Want to link this from GoDaddy? Use a button that says <b>Start Lesson →</b> and point it to this page.
        </div>
      </div>
    </div>
  </div>

<script>
  // ---------- helpers ----------
  function randInt(min, max){ return Math.floor(Math.random() * (max - min + 1)) + min; }

  function permValue(n, r){
    if (r > n) return 0;
    let out = 1;
    for (let k = 0; k < r; k++) out *= (n - k);
    return out;
  }

  function permSteps(n, r){
    if (r > n) return "r > n → 0";
    const terms = [];
    for (let k = 0; k < r; k++) terms.push(String(n - k));
    return terms.join(" · ");
  }

  // ---------- calculator ----------
  const nEl = document.getElementById("n");
  const rEl = document.getElementById("r");
  const calcOut = document.getElementById("calcOut");
  const calcSteps = document.getElementById("calcSteps");
  const calcMsg = document.getElementById("calcMsg");

  function updateCalc(){
    const n = parseInt(nEl.value, 10);
    const r = parseInt(rEl.value, 10);

    if (Number.isNaN(n) || Number.isNaN(r) || n < 0 || r < 0){
      calcMsg.className = "alert no";
      calcOut.textContent = "Enter valid n and r (≥ 0).";
      calcSteps.textContent = "";
      return;
    }

    const val = permValue(n, r);
    calcMsg.className = "alert ok";
    calcOut.textContent = `P(${n},${r}) = ${val}`;
    calcSteps.textContent = permSteps(n, r);
  }

  document.getElementById("btnCalc").addEventListener("click", updateCalc);
  updateCalc();

  // ---------- score ----------
  let score = 0, streak = 0, count = 0;
  function renderScore(){
    document.getElementById("score").textContent = score;
    document.getElementById("streak").textContent = streak;
    document.getElementById("count").textContent = count;
  }
  renderScore();

  function resetScore(){
    score = 0; streak = 0; count = 0;
    renderScore();
    document.getElementById("scenarioResult").style.display = "none";
    document.getElementById("practiceResult").style.display = "none";
    document.getElementById("answer").value = "";
  }

  document.getElementById("btnResetScore").addEventListener("click", resetScore);

  // ---------- section A: perm or not ----------
  const scenarios = [
    { text: "Awarding gold, silver, and bronze among 12 runners", isPerm: true, why: "Different ranks (gold/silver/bronze) → order matters." },
    { text: "Choosing 5 students from 30 to form a committee", isPerm: false, why: "A committee has no order. Same group = same result." },
    { text: "Creating a 4-digit PIN with no repeated digits", isPerm: true, why: "1234 ≠ 4321 → order matters." },
    { text: "Picking 3 pizza toppings from 10 options", isPerm: false, why: "Toppings are a set. Order doesn’t change the final pizza." },
    { text: "Assigning Captain and Assistant Captain from 18 players", isPerm: true, why: "Two different roles → order matters." },
    { text: "Selecting 6 people to ride in a car (no seat assignments)", isPerm: false, why: "No positions/roles → just a group." },
  ];

  let currentScenario = null;
  const scenarioText = document.getElementById("scenarioText");
  const scenarioResult = document.getElementById("scenarioResult");

  function newScenario(){
    currentScenario = scenarios[randInt(0, scenarios.length - 1)];
    scenarioText.textContent = currentScenario.text;
    scenarioResult.style.display = "none";
    scenarioResult.className = "alert";
    scenarioResult.textContent = "";
  }

  function answerScenario(userSaysPerm){
    if (!currentScenario) return;
    const correct = (userSaysPerm === currentScenario.isPerm);

    count += 1;
    if (correct){
      score += 1;
      streak += 1;
      scenarioResult.className = "alert ok";
      scenarioResult.innerHTML = `<b>Correct.</b> ${currentScenario.why}`;
    } else {
      streak = 0;
      scenarioResult.className = "alert no";
      const correctLabel = currentScenario.isPerm ? "Permutation" : "Not permutation";
      scenarioResult.innerHTML = `<b>Not quite.</b> Correct answer: <b>${correctLabel}</b>. ${currentScenario.why}`;
    }
    scenarioResult.style.display = "block";
    renderScore();
  }

  document.getElementById("btnPerm").addEventListener("click", () => answerScenario(true));
  document.getElementById("btnNotPerm").addEventListener("click", () => answerScenario(false));

  // ---------- section B: compute P(n,r) ----------
  const practiceQ = document.getElementById("practiceQ");
  const answerEl = document.getElementById("answer");
  const practiceResult = document.getElementById("practiceResult");

  let currentPractice = null;

  function newPractice(){
    const contexts = [
      "runners placing 1st/2nd/3rd",
      "students assigned to President/Vice/Treasurer",
      "books arranged in the first r spots on a shelf",
      "players assigned to different positions",
      "letters used for a code (no repeats)",
    ];
    const n = randInt(6, 18);
    const r = randInt(2, Math.min(7, n));
    const context = contexts[randInt(0, contexts.length - 1)];
    const val = permValue(n, r);

    currentPractice = { n, r, context, val };
    practiceQ.textContent = `Compute P(${n},${r}) — Think: ${context}.`;
    answerEl.value = "";
    practiceResult.style.display = "none";
    practiceResult.className = "alert";
    practiceResult.textContent = "";
  }

  function checkPractice(){
    if (!currentPractice) return;
    const user = parseInt(answerEl.value, 10);

    count += 1;

    if (!Number.isFinite(user)){
      streak = 0;
      practiceResult.className = "alert no";
      practiceResult.innerHTML = `Type a number. Answer is <b>${currentPractice.val}</b>. Steps: <code>${permSteps(currentPractice.n, currentPractice.r)}</code>`;
      practiceResult.style.display = "block";
      renderScore();
      return;
    }

    if (user === currentPractice.val){
      score += 1;
      streak += 1;
      practiceResult.className = "alert ok";
      practiceResult.innerHTML = `<b>Correct.</b> Steps: <code>${permSteps(currentPractice.n, currentPractice.r)}</code>`;
    } else {
      streak = 0;
      practiceResult.className = "alert no";
      practiceResult.innerHTML = `<b>No.</b> Correct answer: <b>${currentPractice.val}</b>. Steps: <code>${permSteps(currentPractice.n, currentPractice.r)}</code>`;
    }
    practiceResult.style.display = "block";
    renderScore();
  }

  function revealPractice(){
    if (!currentPractice) return;
    practiceResult.className = "alert ok";
    practiceResult.innerHTML = `Answer: <b>${currentPractice.val}</b>. Steps: <code>${permSteps(currentPractice.n, currentPractice.r)}</code>`;
    practiceResult.style.display = "block";
  }

  document.getElementById("btnCheck").addEventListener("click", checkPractice);
  document.getElementById("btnReveal").addEventListener("click", revealPractice);

  // Enter key submits answer
  answerEl.addEventListener("keydown", (e) => {
    if (e.key === "Enter") checkPractice();
  });

  // ---------- top buttons ----------
  document.getElementById("btnNewQuestion").addEventListener("click", () => {
    newScenario();
    newPractice();
    document.getElementById("practice").scrollIntoView({behavior:"smooth"});
  });

  document.getElementById("btnJumpPractice").addEventListener("click", () => {
    document.getElementById("practice").scrollIntoView({behavior:"smooth"});
  });

  // init
  newScenario();
  newPractice();
</script>
</body>
</html>
